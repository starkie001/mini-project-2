<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ask the Magic 8 Ball (Gemini Edition)</title>
  <link rel="stylesheet" type="text/css" href="index.css" />
</head>
<body>
  <div class="container">
    <h1>ðŸŽ± Ask the Magic 8 Ball</h1>
    <p>Think of a question, then click Generate to reveal your fate...</p>

    <div class="ball">
      <div class="answer">8</div>
    </div>

    <textarea id="prompt" rows="5" cols="50" placeholder="Type your question here..."></textarea><br>
    <button onclick="sendPrompt()">Generate</button>

    <pre id="result"></pre>
  </div>

  <script>
    async function sendPrompt() {
      const prompt = document.getElementById('prompt').value;
      const res = await fetch('/api/generate', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ prompt })
      });
      const data = await res.json();
      const result = document.getElementById('result');
      const answer = document.querySelector('.answer');

      if (!res.ok) {
        result.innerText = data.message;
        answer.textContent = 'âŒ';
        return;
      }

      result.innerText = `"${data.content}"`;
      answer.textContent = data.content.length > 20
        ? 'ðŸ”®'
        : data.content;
    }
  </script>
</body>
</html>
